# 天下一 Game Battle Contest 2021 Spring

## 結果

2 位 🎉🎉🎉

![](https://github.com/kmyk/tenka1-2021-spring/blob/master/image.png)

## 実行方法

```console
$ g++ -std=c++17 -O2 main.cpp
$ TOKEN=... python3 call_api.py ./a.out
```

## 解法など

### 概要

ゲーム終了時のタスクの価値を考えながらビームサーチをやる。

### 詳細

観察 1:
わが家のインターネットの速度は 1.1 Mbps らしい。
しかも不安定である。
VPS 上に byobu を張ってそこから通信するしかなさそう。


観察 2:
エージェントの履歴は独立であるので、エージェントは 1 体であると考えてよい。
複数体存在していることによって自分の行動の他者の得点への影響が多少は強まるが、あまり意味はないはず。
すべてのエージェントが同じルートを使っていないならば、その解法は最適ではない。
ところで、たくさんエージェントが動いているときらきらして楽しいが、あまり眺めすぎないようにしたい。

観察 3:
タスクの価値は減衰する。
ゲーム終了時のタスクの価値をなんとか予測して、この値にもとづいて使うタスクを選択する必要がある。
特に、追加されたばかりのタスクの価値は不安定であるので、それに惑わされないようにする (あるいは単に無視する) のがよさそう。

解法 1:
とりあえずコスパが最高のタスクを連打するとそれなりのスコアが出るはず。
suffix と prefix との重なりが少ない序盤はこれでほぼ最適になるはず。

解法 2:
ビームサーチをやる。
遷移は次に完成させるタスクをひとつ選んで次の状態とする。
空間も小さいし自明に大域最適解が出てそう。

観察 4:
タスクの価値の減衰があんまりない + タスクの重みがあんまり増えない + やれることがない なので序盤のミスが響くらしい。
減衰するからゆっくり落ちついてやればええやろとしてたのは失敗だったらしい。
